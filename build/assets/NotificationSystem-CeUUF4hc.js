import{j as e}from"./radix-vendor-BV-zUPZ_.js";import{a}from"./react-vendor-BK8AH302.js";import{ap as M,aA as A,aS as R,aR as z,ch as U,b1 as G,b0 as g,ci as v,c3 as q,bh as K,bR as F,bs as W,ak as X,bB as Z,ah as Q,ax as ee,aC as te}from"./ui-vendor-DgaPPGCl.js";const se=[{name:"customer_name",desc:"Full name of the customer"},{name:"driver_name",desc:"Full name of the driver"},{name:"job_id",desc:"Unique Job Reference ID"},{name:"journey_id",desc:"Journey Reference ID"},{name:"pickup_address",desc:"Full pickup address"},{name:"dropoff_address",desc:"Full dropoff address"},{name:"job_date",desc:"Formatted date of the job"},{name:"start_time",desc:"Scheduled start time"},{name:"amount",desc:"Total job amount or payout"},{name:"tip_amount",desc:"Tip amount if applicable"},{name:"deallocation_reason",desc:"Reason for removal"},{name:"fee_amount",desc:"Calculated fee"},{name:"total_jobs_in_journey",desc:"Count of jobs in journey"}],ae=[{id:"payment_received",name:"Customer Payment Completed",category:"payment",recipient:"customer",channels:{email:!0,sms:!0,push:!1},enabled:!0,emailTemplate:{subject:"Payment received ‚Äì ShiftMyHome",body:`<p>Hi {{customer_name}},</p>
<p>We‚Äôve received your payment of ¬£{{amount}} for job {{job_id}}.</p>
<p><strong>Your job is now confirmed.</strong><br>
Pickup: {{pickup_address}}<br>
Drop-off: {{dropoff_address}}<br>
Date: {{job_date}}</p>
<p>Thank you for choosing ShiftMyHome.</p>`},smsTemplate:{text:"ShiftMyHome: Payment of ¬£{{amount}} received for your job {{job_id}}."}},{id:"journey_accepted",name:"Journey Accepted",category:"journey",recipient:"driver",channels:{email:!0,sms:!0,push:!1},enabled:!0,emailTemplate:{subject:"Journey accepted ‚Äì {{journey_id}}",body:`<p>Hi {{driver_name}},</p>
<p>You have successfully accepted Journey {{journey_id}}.</p>
<ul>
<li>Date: {{job_date}}</li>
<li>Start time: {{start_time}}</li>
<li>Route: {{pickup_address}} ‚Üí {{dropoff_address}}</li>
</ul>
<p>Total jobs: {{total_jobs_in_journey}}<br>
Total payout: ¬£{{amount}}</p>
<p>Please make sure you arrive on time and use the ShiftMyHome Driver App.</p>`},smsTemplate:{text:"ShiftMyHome: Journey {{journey_id}} accepted. Start {{start_time}}. Check app for details."}},{id:"journey_allocated",name:"Journey Allocated",category:"journey",recipient:"driver",channels:{email:!0,sms:!1,push:!0},enabled:!0,emailTemplate:{subject:"New Journey Allocation ‚Äì {{journey_id}}",body:`<p>Hi {{driver_name}},</p>
<p>You have been allocated a new journey: <strong>{{journey_id}}</strong>.</p>
<p>Please log in to your dashboard to view details and accept or reject this route.</p>`},smsTemplate:{text:"ShiftMyHome: You have been allocated Journey {{journey_id}}. Please check your app."}},{id:"job_completed",name:"Job Completed (Feedback Request)",category:"feedback",recipient:"customer",channels:{email:!0,sms:!1,push:!1},enabled:!0,delay:60,emailTemplate:{subject:"How was your move? Leave a review & tip your driver",body:`<p>Hi {{customer_name}},</p>
<p>Your job {{job_id}} has now been completed.</p>
<p>‚≠ê <strong>Please take a moment to leave feedback for your driver.</strong></p>
<p>üí∏ If you were happy with the service, you can also leave a tip ‚Äì 100% goes directly to the driver.</p>
<p><a href="#">[Leave Review]</a> &nbsp; <a href="#">[Leave a Tip]</a></p>
<p>Thank you for choosing ShiftMyHome.</p>`},smsTemplate:{text:"ShiftMyHome: Your job is complete. Leave a review or tip your driver in your account."}},{id:"review_left",name:"Customer Left Review",category:"feedback",recipient:"driver",channels:{email:!0,sms:!1,push:!1},enabled:!0,emailTemplate:{subject:"Customer left you a review ‚Äì Job {{job_id}}",body:`<p>Hi {{driver_name}},</p>
<p>Your customer has left you a review for job {{job_id}}.</p>
<p><strong>Rating:</strong><br>
Punctuality: ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ<br>
Communication: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê<br>
Care of goods: ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ<br>
Presentation: ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</p>
<p>Thank you for delivering a great service.</p>`},smsTemplate:{text:""}},{id:"tip_received",name:"Tip Received",category:"payment",recipient:"driver",channels:{email:!0,sms:!1,push:!0},enabled:!0,emailTemplate:{subject:"Congrats, you got a tip!",body:`<p>üéâ Great news {{driver_name}}!</p>
<p>{{customer_name}} sent you a tip of ¬£{{tip_amount}} for a great job.</p>
<p>100% of your tip goes to you.<br>
The amount will be included in your next payout.</p>
<p>View payments in your dashboard.</p>`},smsTemplate:{text:"ShiftMyHome: You received a ¬£{{tip_amount}} tip from {{customer_name}}!"}},{id:"job_cancelled_driver",name:"Job Cancelled (To Driver)",category:"job",recipient:"driver",channels:{email:!0,sms:!0,push:!1},enabled:!0,emailTemplate:{subject:"Job {{job_id}} has been cancelled ‚Äì ShiftMyHome",body:`<p>Hi {{driver_name}},</p>
<p>Unfortunately, job {{job_id}} has been cancelled.</p>
<p><strong>Job details:</strong><br>
Service: {{service_type}}<br>
Pickup: {{pickup_address}}<br>
Drop-off: {{dropoff_address}}<br>
Date: {{job_date}}<br>
Time window: {{time_window}}</p>
<p>We apologise for any inconvenience caused.</p>
<p>If you now have spare capacity, please log in to your ShiftMyHome account to view available work.</p>`},smsTemplate:{text:"ShiftMyHome: Job {{job_id}} has been cancelled. Check your account for available work."}},{id:"job_cancelled_customer",name:"Job Cancelled (To Customer)",category:"job",recipient:"customer",channels:{email:!0,sms:!1,push:!1},enabled:!0,emailTemplate:{subject:"Your job {{job_id}} has been cancelled ‚Äì ShiftMyHome",body:`<p>Hi {{customer_name}},</p>
<p>Your job {{job_id}} has been cancelled.</p>
<p>If a refund is due, it will be processed according to our cancellation policy.<br>
You can view details in your account.</p>
<p>‚Äì ShiftMyHome</p>`},smsTemplate:{text:""}},{id:"job_deallocated",name:"Job Deallocated",category:"job",recipient:"driver",channels:{email:!0,sms:!0,push:!1},enabled:!0,emailTemplate:{subject:"You have been deallocated from job {{job_id}}",body:`<p>Hi {{driver_name}},</p>
<p>You have been deallocated from job {{job_id}}.</p>
<p><strong>Reason:</strong> {{deallocation_reason}}</p>
<p>Please note that deallocation fees may apply depending on how close this is to the scheduled start time.</p>`},smsTemplate:{text:"ShiftMyHome: You have been deallocated from job {{job_id}}. Check email for details."}},{id:"deallocation_fee",name:"Deallocation Fee Applied",category:"payment",recipient:"driver",channels:{email:!0,sms:!1,push:!1},enabled:!0,emailTemplate:{subject:"Deallocation fee applied ‚Äì Job {{job_id}}",body:`<p>Hi {{driver_name}},</p>
<p>A deallocation fee has been applied for job {{job_id}}.</p>
<ul>
<li>Fee amount: ¬£{{fee_amount}}</li>
<li>Reason: {{deallocation_reason}}</li>
<li>Time before job: {{hours_before_start}} hours</li>
</ul>
<p>This amount will be deducted from your next payout.</p>`},smsTemplate:{text:""}},{id:"journey_allocated",name:"Journey Allocated",category:"journey",recipient:"driver",channels:{email:!0,sms:!0,push:!0},enabled:!0,emailTemplate:{subject:"New Journey Allocated ‚Äì {{journey_id}}",body:`<p>Hi {{driver_name}},</p>
<p>You have been allocated a new journey: <strong>{{journey_id}}</strong>.</p>
<p>Please log in to the driver app to view details and accept or reject this journey.</p>`},smsTemplate:{text:"ShiftMyHome: New journey {{journey_id}} allocated to you. Please check app."}},{id:"job_added_to_journey",name:"Job Added to Journey",category:"journey",recipient:"driver",channels:{email:!0,sms:!1,push:!0},enabled:!0,emailTemplate:{subject:"Update: Job added to Journey {{journey_id}}",body:`<p>A new job ({{job_id}}) has been added to your journey {{journey_id}}.</p>
<p>Your route has been updated. Please check the new schedule.</p>`},smsTemplate:{text:"ShiftMyHome: Job {{job_id}} added to journey {{journey_id}}. Route updated."}}],le=[{id:"rule-1",minHoursBefore:120,maxHoursBefore:null,feeType:"fixed",value:10},{id:"rule-2",minHoursBefore:72,maxHoursBefore:120,feeType:"percent",value:25},{id:"rule-3",minHoursBefore:24,maxHoursBefore:72,feeType:"percent",value:50},{id:"rule-4",minHoursBefore:0,maxHoursBefore:24,feeType:"percent",value:100}],oe=[{id:"log-1",date:"2023-12-01 14:30",event:"Tip Received",recipient:"Driver - Mike Brown",channel:"email",status:"sent",metadata:{jobId:"JOB-123",journeyId:"J-99"}},{id:"log-2",date:"2023-12-01 12:00",event:"Job Started",recipient:"Customer - Sarah J",channel:"sms",status:"delivered",metadata:{jobId:"JOB-456"}},{id:"log-3",date:"2023-11-30 09:15",event:"Job Cancelled",recipient:"Driver - John Smith",channel:"email",status:"opened",metadata:{jobId:"JOB-789"}},{id:"log-4",date:"2023-11-30 09:15",event:"Job Cancelled",recipient:"Customer - Alex D",channel:"email",status:"sent",metadata:{jobId:"JOB-789"}},{id:"log-5",date:"2023-11-29 18:00",event:"Deallocation Fee",recipient:"Driver - Mike Brown",channel:"email",status:"sent",metadata:{fee:25,jobId:"JOB-101"}}];function ce(){const[i,p]=a.useState("triggers"),[D,N]=a.useState(ae),[b,E]=a.useState(le),[L]=a.useState(oe),[d,m]=a.useState(null),[l,u]=a.useState("email"),[x,w]=a.useState(""),[h,_]=a.useState(""),[c,T]=a.useState(""),[S,C]=a.useState(0),[f,P]=a.useState(100),[o,I]=a.useState(48),[j,k]=a.useState(null),$=()=>{const t=b.find(s=>s.maxHoursBefore===null?o>=s.minHoursBefore:o>=s.minHoursBefore&&o<s.maxHoursBefore);if(t){const s=t.feeType==="fixed"?t.value:f*(t.value/100);k({fee:s,ruleId:t.id})}else k(null)},H=(t,s)=>{N(r=>r.map(n=>n.id===t?{...n,channels:{...n.channels,[s]:!n.channels[s]}}:n))},Y=t=>{m(t),w(t.emailTemplate.subject),_(t.emailTemplate.body),T(t.smsTemplate.text),C(t.delay||0),u("email")},V=()=>{d&&(N(t=>t.map(s=>s.id===d.id?{...s,delay:S,emailTemplate:{subject:x,body:h},smsTemplate:{text:c}}:s)),m(null))},O=()=>{alert(`üß™ Test sent to admin (System Default)

Subject: ${x}
Channel: ${l.toUpperCase()}`)},J=(t,s,r)=>{E(n=>n.map(y=>y.id===t?{...y,[s]:r}:y))};(()=>{const t=b.find(s=>s.maxHoursBefore===null?o>=s.minHoursBefore:o>=s.minHoursBefore&&o<s.maxHoursBefore);return t?t.feeType==="fixed"?t.value:f*t.value/100:0})();const B=()=>e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 bg-slate-50 p-3 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 w-full uppercase mb-1",children:"Available Variables:"}),se.map(t=>e.jsxs("div",{className:"text-xs bg-white border border-slate-200 px-2 py-1 rounded shadow-sm text-slate-600 hover:text-blue-600 cursor-copy group relative",title:t.desc,onClick:()=>{navigator.clipboard.writeText(`{{${t.name}}}`)},children:[`{{${t.name}}}`,e.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-[200px] bg-slate-800 text-white text-[10px] p-1.5 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:t.desc})]},t.name))]});return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-blue-600"}),"Communication & Automation Engine"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage triggers, automation rules, templates, and communication logs."})]}),e.jsxs("div",{className:"flex p-1 bg-slate-100 rounded-lg self-start",children:[e.jsxs("button",{onClick:()=>p("triggers"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${i==="triggers"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(A,{className:"w-4 h-4"}),"Automation Rules"]}),e.jsxs("button",{onClick:()=>p("rules"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${i==="rules"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(R,{className:"w-4 h-4"}),"Pricing & Rules"]}),e.jsxs("button",{onClick:()=>p("logs"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${i==="logs"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(z,{className:"w-4 h-4"}),"Logs & Audit"]})]})]}),i==="triggers"&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Event Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Recipient"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Channels"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:D.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t.category==="payment"?"bg-green-100 text-green-600":t.category==="journey"?"bg-blue-100 text-blue-600":t.category==="feedback"?"bg-yellow-100 text-yellow-600":"bg-slate-100 text-slate-600"}`,children:t.category==="payment"?e.jsx(R,{className:"w-4 h-4"}):t.category==="journey"?e.jsx(U,{className:"w-4 h-4"}):t.category==="feedback"?e.jsx(G,{className:"w-4 h-4"}):e.jsx(M,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500 capitalize",children:[t.category," Event"]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${t.recipient==="customer"?"bg-indigo-50 text-indigo-700":t.recipient==="driver"?"bg-orange-50 text-orange-700":"bg-slate-100 text-slate-700"}`,children:t.recipient})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>H(t.id,"email"),className:`p-1.5 rounded transition-all ${t.channels.email?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-300"}`,title:"Toggle Email",children:e.jsx(g,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H(t.id,"sms"),className:`p-1.5 rounded transition-all ${t.channels.sms?"bg-green-100 text-green-600":"bg-slate-100 text-slate-300"}`,title:"Toggle SMS",children:e.jsx(v,{className:"w-4 h-4"})})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("button",{onClick:()=>Y(t),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1 ml-auto",children:[e.jsx(q,{className:"w-4 h-4"}),"Edit Template"]})})]},t.id))})]})})}),i==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-orange-500"}),"Deallocation Fee Logic"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure automatic fees charged to drivers when they are removed from a job. The system checks the time difference between deallocation and job start time."}),e.jsx("div",{className:"overflow-x-auto border rounded-lg",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Time Before Job"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Fee Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Example Calculation (Job ¬£100)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:b.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:t.maxHoursBefore===null?`More than ${t.minHoursBefore} hours`:`${t.minHoursBefore} ‚Äì ${t.maxHoursBefore} hours`}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("select",{value:t.feeType,onChange:r=>J(t.id,"feeType",r.target.value),className:"text-sm border-slate-200 rounded px-2 py-1",children:[e.jsx("option",{value:"fixed",children:"Fixed Amount (¬£)"}),e.jsx("option",{value:"percent",children:"Percentage (%)"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:t.value,onChange:r=>J(t.id,"value",parseFloat(r.target.value)),className:"w-20 border border-slate-300 rounded px-2 py-1 text-sm"}),e.jsx("span",{className:"text-sm text-slate-500",children:t.feeType==="fixed"?"¬£":"%"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:t.feeType==="fixed"?`¬£${t.value.toFixed(2)}`:`¬£${(100*(t.value/100)).toFixed(2)}`})]},t.id))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:[e.jsx(F,{className:"w-4 h-4"}),"Save Rules"]})})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-lg border border-slate-700 p-6 text-white",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-indigo-400"}),"Fee Simulator (Test Your Logic)"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Job Value (¬£)"}),e.jsx("input",{type:"number",value:f,onChange:t=>P(parseFloat(t.target.value)),className:"bg-slate-900 border border-slate-600 rounded px-3 py-2 w-32 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Hours Before Job"}),e.jsx("input",{type:"number",value:o,onChange:t=>I(parseFloat(t.target.value)),className:"bg-slate-900 border border-slate-600 rounded px-3 py-2 w-32 text-white focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsx("button",{onClick:$,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-lg transition-colors",children:"Calculate Fee"}),j&&e.jsxs("div",{className:"ml-auto bg-slate-700/50 p-4 rounded-lg border border-slate-600 min-w-[200px] animate-in fade-in slide-in-from-right-4",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase",children:"Calculated Fee"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["¬£",j.fee.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-indigo-300 mt-1",children:["Matched Rule ID: ",j.ruleId]})]})]})]})]}),i==="logs"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 flex gap-4 bg-slate-50",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search logs...",className:"w-full pl-9 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-blue-500"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50",children:[e.jsx(Z,{className:"w-4 h-4"}),"Filter"]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Date/Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Event"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Recipient"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"Channel"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:L.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-slate-600",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:t.event}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:t.recipient}),e.jsxs("td",{className:"px-6 py-4 text-center",children:[t.channel==="email"&&e.jsx(g,{className:"w-4 h-4 text-blue-500 mx-auto"}),t.channel==="sms"&&e.jsx(v,{className:"w-4 h-4 text-green-500 mx-auto"})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${t.status==="delivered"||t.status==="opened"?"bg-green-100 text-green-800":t.status==="sent"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t.status})})]},t.id))})]})]}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:["Edit Template: ",d.name]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Customize the content sent to ",d.recipient,"s."]})]}),e.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(Q,{className:"w-5 h-5 text-slate-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/50",children:e.jsx("div",{className:"flex gap-6 h-full",children:e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex bg-white p-1 rounded-lg border border-slate-200 w-fit",children:[e.jsxs("button",{onClick:()=>u("email"),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center gap-2 transition-all ${l==="email"?"bg-blue-50 text-blue-700":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(g,{className:"w-4 h-4"})," Email"]}),e.jsxs("button",{onClick:()=>u("sms"),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center gap-2 transition-all ${l==="sms"?"bg-green-50 text-green-700":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(v,{className:"w-4 h-4"})," SMS"]}),e.jsxs("button",{onClick:()=>u("preview"),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center gap-2 transition-all ${l==="preview"?"bg-purple-50 text-purple-700":"text-slate-500 hover:text-slate-700"}`,children:[e.jsx(ee,{className:"w-4 h-4"})," Preview"]})]}),l==="email"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-left-2 duration-300",children:[B(),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Email Subject"}),e.jsx("input",{type:"text",value:x,onChange:t=>w(t.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1 flex items-center gap-1",children:[e.jsx(te,{className:"w-3 h-3 text-slate-400"}),"Delay (mins)"]}),e.jsx("input",{type:"number",value:S,onChange:t=>C(parseInt(t.target.value)||0),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0 = Instant"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Email Body (HTML)"}),e.jsx("textarea",{value:h,onChange:t=>_(t.target.value),className:"w-full flex-1 min-h-[300px] p-4 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm leading-relaxed"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Standard HTML tags supported (p, br, b, strong, ul, li)."})]})]}),l==="sms"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-left-2 duration-300",children:[B(),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"SMS Text"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:c,onChange:t=>T(t.target.value),maxLength:160,className:"w-full min-h-[150px] p-4 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-lg"}),e.jsxs("div",{className:"absolute bottom-3 right-3 text-xs font-bold text-slate-400",children:[c.length," / 160 chars"]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Keep SMS short and transactional. Avoid complex variables if possible."})]})]}),l==="preview"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"bg-white border rounded-xl shadow-sm p-8 max-w-2xl mx-auto w-full",children:[e.jsxs("div",{className:"border-b pb-4 mb-6",children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900",children:x.replace(/{{.*?}}/g,"Sample Value")}),e.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["To: ",d.recipient,"@example.com"]})]}),e.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:h.replace(/{{.*?}}/g,'<span class="bg-yellow-100 px-1 rounded text-yellow-800 font-mono text-xs">Sample</span>')}})]}),c&&e.jsxs("div",{className:"bg-white border rounded-xl shadow-sm p-4 max-w-sm mx-auto w-full border-l-4 border-l-green-500",children:[e.jsx("div",{className:"font-bold text-xs text-slate-400 uppercase mb-2",children:"SMS Preview"}),e.jsx("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-800 text-sm",children:c.replace(/{{.*?}}/g,"[Sample]")})]})]})]})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 bg-white flex justify-between gap-3",children:[e.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 text-slate-700 bg-slate-100 font-bold rounded-lg hover:bg-slate-200 transition-colors",children:[e.jsx(A,{className:"w-4 h-4 text-orange-500"}),"Send Test"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-shadow shadow-lg shadow-blue-200",children:[e.jsx(F,{className:"w-4 h-4"}),"Save Template"]})]})]})]})})]})}export{ce as NotificationSystem,ce as default};
