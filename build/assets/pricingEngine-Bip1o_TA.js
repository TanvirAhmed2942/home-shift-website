import{a as w}from"./adminPricingManager-Fd3awkha.js";const S=1.1,D=15,x=[{id:"small",name:"Small Van",icon:"ðŸš™",minVolume:0,maxVolume:5,baseFee:40,pricePerMile:1.5,pricePerCubicMeter:15,minimumCharge:60,crew1Man:40,crew2Men:60,crew3Men:90},{id:"medium",name:"Medium Van",icon:"ðŸš",minVolume:5,maxVolume:10,baseFee:60,pricePerMile:1.8,pricePerCubicMeter:15,minimumCharge:80,crew1Man:50,crew2Men:75,crew3Men:110},{id:"large",name:"Large Van",icon:"ðŸšš",minVolume:10,maxVolume:18,baseFee:80,pricePerMile:2.2,pricePerCubicMeter:15,minimumCharge:100,crew1Man:60,crew2Men:90,crew3Men:130},{id:"luton",name:"Luton Van",icon:"ðŸš›",minVolume:18,maxVolume:25,baseFee:100,pricePerMile:2.5,pricePerCubicMeter:15,minimumCharge:120,crew1Man:70,crew2Men:100,crew3Men:150}],A=[{id:"assembly",name:"Assembly Service",price:30,type:"flat"},{id:"disassembly",name:"Disassembly Service",price:30,type:"flat"},{id:"packaging",name:"Packaging Materials",price:50,type:"flat"},{id:"piano",name:"Piano Moving (Upright)",price:120,type:"flat"},{id:"flights",name:"Stairs (Per Flight)",price:15,type:"per_floor"},{id:"long_carry",name:"Long Carry (25m+)",price:20,type:"flat"}],T={"Small box":.03,"Medium box":.05,"Large box":.08,"Extra large box":.1,"Wardrobe box":.15,Armchair:.4,"Recliner chair":.6,"2-seat sofa":1.2,"3-seat sofa":1.8,"4-seat sofa":2.2,"Corner sofa (small)":2.2,"Corner sofa (large)":3,"Sofa bed":2,"Coffee table":.3,"TV stand (small)":.4,"TV stand (large)":.7,"Bookcase (small)":.6,"Bookcase (large)":1.2,'TV up to 40"':.2,'TV 40â€“60"':.3,'TV 60"+':.4,"Single mattress":.4,"Double mattress":.6,"King mattress":.8,"Single bed frame":.6,"Double bed frame":1,"King bed frame":1.2,"Bedside table":.25,"Chest of drawers (small)":.6,"Chest of drawers (large)":1,"Wardrobe 1 door":.8,"Wardrobe 2 doors":1.2,"Wardrobe 3 doors":1.8,"Fridge (under counter)":.6,"Fridge freezer":1,"American fridge":1.5,"Washing machine":.6,"Tumble dryer":.6,Dishwasher:.6,Cooker:.7,Microwave:.15,"Kitchen table":.8,Chair:.2,Bicycle:.3,Suitcase:.2,"Vacuum cleaner":.15,"Ironing board":.1,Mirror:.15,Rug:.2,Lamp:.1,Plant:.2,"Golf clubs":.3,"Pram/Pushchair":.4},E=600;class R{static async calculateQuote(e){await new Promise(r=>setTimeout(r,E));const i=w.getRules(e.serviceType);let a=0;e.items&&e.items.length>0&&e.items.forEach(r=>{const V=T[r.name]||.1;a+=V*(r.quantity||1)}),a=a*S;let n=e.distance;n===void 0&&(n=Math.max(i.minDistance,(e.pickup.postcode.length+e.dropoff.postcode.length)*1.5));const m=i.basePrice,p=n*i.pricePerMile;let s=0;a>0&&(s=a*D);let o=e.selectedVehicle;o||(a<=5?o="small":a<=10?o="medium":a<=18?o="large":o="luton");const d=x.find(r=>r.id===o);d&&d.pricePerCubicMeter&&(s=a*d.pricePerCubicMeter);const y=i.vanTypeMultiplier[o||"medium"],b=(m+p)*(y-1);let l=0;if(e.pickup.hasStairs||!e.pickup.hasLift&&e.pickup.floor>0){const r=e.pickup.hasStairs?e.pickup.stairFlights:e.pickup.floor;l+=r*i.stairsPricePerFlight}if(e.dropoff.hasStairs||!e.dropoff.hasLift&&e.dropoff.floor>0){const r=e.dropoff.hasStairs?e.dropoff.stairFlights:e.dropoff.floor;l+=r*i.stairsPricePerFlight}let f=0;const M={under10m:0,"10-25m":15,"25-50m":30,"50m+":50};f+=M[e.pickup.carryDistance]||0,f+=M[e.dropoff.carryDistance]||0;let g=0;(e.pickup.parkingRestrictions.paidParking||e.dropoff.parkingRestrictions.paidParking)&&(g+=20),(e.pickup.parkingRestrictions.loadingBayOnly||e.dropoff.parkingRestrictions.loadingBayOnly)&&(g+=15);let c=0;e.extras.helpers>1&&(c+=(e.extras.helpers-1)*40),e.extras.assembly&&(c+=30),e.extras.disassembly&&(c+=30),e.extras.packaging&&(c+=50);let h=0;(e.pickup.postcode.toUpperCase().startsWith("W1")||e.dropoff.postcode.toUpperCase().startsWith("W1"))&&(h+=i.congestionCharge);const k=e.date.getDay()===0||e.date.getDay()===6;let t=m+p+s+b+l+c+h+f+g;k&&(t*=i.weekendMultiplier),t<i.minPrice&&(t=i.minPrice);const P=t*.2,u=t+P,C=u*.2;return{quoteId:`QT-${Date.now().toString(36).toUpperCase()}`,breakdown:{basePrice:m,distancePrice:p,timePrice:0,volumePrice:s,vehicleSurcharge:b,stairsSurcharge:l,extrasPrice:c,congestionZone:h,vat:P,total:u,deposit:C},estimatedDuration:`${Math.ceil(n/20)+1} hours`,recommendedVehicle:o||"medium",distance:n,expiryDate:new Date(Date.now()+1440*60*1e3),totalVolume:a}}}export{A as E,S as G,R as P,x as V};
