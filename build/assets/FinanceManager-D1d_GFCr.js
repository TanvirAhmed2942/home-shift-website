import{j as e}from"./radix-vendor-BV-zUPZ_.js";import{a as d}from"./react-vendor-BK8AH302.js";import{B as x,t as N}from"./index-CcmsAmAk.js";import{ak as S,ax as v,bJ as k,bi as A,bG as D,bI as E,aP as M,bg as V}from"./ui-vendor-DgaPPGCl.js";const h=[{id:"DRV-001",name:"John Smith",email:"john.smith@example.com",bankStatus:"verified",totalPending:1250.5,totalPaid:45e3},{id:"DRV-002",name:"Sarah Johnson",email:"sarah.j@example.com",bankStatus:"verified",totalPending:850.25,totalPaid:32150},{id:"DRV-003",name:"Michael Brown",email:"m.brown@example.com",bankStatus:"unverified",totalPending:0,totalPaid:1200},{id:"DRV-004",name:"Emma Wilson",email:"emma.w@example.com",bankStatus:"verified",totalPending:2100.75,totalPaid:15400},{id:"DRV-005",name:"David Lee",email:"david.l@example.com",bankStatus:"verified",totalPending:450,totalPaid:8900}],F=()=>{const n=[];return h.forEach(a=>{a.totalPending>0&&n.push({id:`PAY-${Math.floor(Math.random()*1e4)}`,driverId:a.id,driverName:a.name,periodStart:"01 Dec 2024",periodEnd:"07 Dec 2024",jobsCount:Math.floor(Math.random()*10)+1,grossAmount:a.totalPending*.9,extrasAmount:a.totalPending*.15,feesAmount:a.totalPending*.05,netAmount:a.totalPending,status:"pending"});for(let r=1;r<=3;r++){const s=Math.floor(Math.random()*1e3)+500;n.push({id:`PAY-HIST-${a.id}-${r}`,driverId:a.id,driverName:a.name,periodStart:"01 Nov 2024",periodEnd:"07 Nov 2024",jobsCount:Math.floor(Math.random()*15)+5,grossAmount:s*.9,extrasAmount:s*.15,feesAmount:s*.05,netAmount:s,status:"paid",paidDate:"10 Nov 2024"})}}),n},T=F();function $({activeTab:n}){const[a,r]=d.useState(n||"finance-overview"),[s,p]=d.useState(null),[i,u]=d.useState("pending"),[c,b]=d.useState("");d.useEffect(()=>{n&&(r(n),n==="finance-overview"&&p(null))},[n]);const m=d.useMemo(()=>h.find(t=>t.id===s),[s]),g=d.useMemo(()=>{let t=T;if(s&&(t=t.filter(l=>l.driverId===s)),i==="pending"?t=t.filter(l=>l.status==="pending"||l.status==="processing"):t=t.filter(l=>l.status==="paid"),c&&!s){const l=c.toLowerCase();t=t.filter(j=>j.driverName.toLowerCase().includes(l)||j.id.toLowerCase().includes(l))}return t},[s,i,c]),f=t=>{p(t),r("driver-payouts"),u("pending")},w=()=>{p(null),r("finance-overview"),b("")},y=t=>{N.success("Payout Approved",{description:`Payout ${t} has been sent for processing.`})},P=()=>{N.success(`Exporting ${i} payouts...`,{description:"Your CSV download will start shortly."})},C=a==="driver-payouts"&&!s,o=a==="finance-overview"&&!s;return C?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Driver Payouts"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Select a driver to view their financial details"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 flex gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search drivers...",className:"w-full pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:t=>b(t.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-medium",children:"Driver Name"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"ID"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Bank Status"}),e.jsx("th",{className:"px-6 py-3 font-medium text-right",children:"Pending Payout"}),e.jsx("th",{className:"px-6 py-3 font-medium text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())).map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 group",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-slate-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-slate-500",children:t.id}),e.jsx("td",{className:"px-6 py-4",children:t.bankStatus==="verified"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-50 text-green-700 border border-green-100",children:[e.jsx(v,{className:"w-3 h-3"})," Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-100",children:[e.jsx(k,{className:"w-3 h-3"})," Unverified"]})}),e.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:["£",t.totalPending.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>f(t.id),className:"group-hover:bg-blue-50 group-hover:text-blue-600 group-hover:border-blue-200",children:"View Payouts"})})]},t.id))})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o?e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Finance Overview"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Global financial summary for all drivers"})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 transition-colors",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:m?.name}),e.jsx("span",{className:"px-2.5 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-md",children:m?.id})]}),e.jsx("div",{className:"flex items-center gap-4 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Bank Account:"}),m?.bankStatus==="verified"?e.jsxs("span",{className:"text-green-600 font-medium flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"})," Verified"]}):e.jsxs("span",{className:"text-red-600 font-medium flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"})," Not Verified"]})]})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[o?e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl px-4 py-2 flex flex-col items-end min-w-[140px]",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 uppercase tracking-wide",children:"Total Pending"}),e.jsxs("span",{className:"text-2xl font-bold text-slate-900",children:["£",h.reduce((t,l)=>t+l.totalPending,0).toFixed(2)]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-xl px-4 py-2 flex flex-col items-end min-w-[120px]",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Total Paid"}),e.jsxs("span",{className:"text-xl font-bold text-slate-700",children:["£",m?.totalPaid.toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl px-4 py-2 flex flex-col items-end min-w-[140px]",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 uppercase tracking-wide",children:"Total Pending"}),e.jsxs("span",{className:"text-2xl font-bold text-slate-900",children:["£",m?.totalPending.toFixed(2)]})]})]}),e.jsxs(x,{onClick:P,className:"bg-slate-900 text-white hover:bg-slate-800 h-auto px-5 shadow-lg shadow-slate-900/10",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden flex flex-col min-h-[600px]",children:[e.jsxs("div",{className:"flex border-b border-slate-200 bg-slate-50/50",children:[e.jsxs("button",{onClick:()=>u("pending"),className:`
              relative px-8 py-4 text-sm font-medium transition-all
              ${i==="pending"?"text-blue-600 bg-white border-t-2 border-t-blue-600 shadow-sm z-10":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"}
            `,children:["Pending Payouts",i==="pending"&&e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-px bg-white"})]}),e.jsxs("button",{onClick:()=>u("history"),className:`
              relative px-8 py-4 text-sm font-medium transition-all
              ${i==="history"?"text-blue-600 bg-white border-t-2 border-t-blue-600 shadow-sm z-10":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"}
            `,children:["Payment History",i==="history"&&e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-px bg-white"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-xs border-b border-slate-200",children:e.jsxs("tr",{children:[o&&e.jsx("th",{className:"px-6 py-4 font-medium w-1/5",children:"Driver"}),e.jsx("th",{className:"px-6 py-4 font-medium",children:"Period"}),e.jsx("th",{className:"px-6 py-4 font-medium text-center",children:"Jobs"}),e.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Gross"}),e.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Extras"}),e.jsx("th",{className:"px-6 py-4 font-medium text-right text-red-600",children:"Fees"}),e.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Net Payout"}),e.jsx("th",{className:"px-6 py-4 font-medium text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-4 font-medium text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:o?9:8,className:"py-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-6 h-6 text-slate-400"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:i==="pending"?"No pending payouts found":"No payment history found"})]})})}):g.map(t=>e.jsxs("tr",{className:`
                        hover:bg-slate-50 transition-colors group
                        ${s&&s!==t.driverId?"opacity-50":""}
                      `,children:[o&&e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-900",children:t.driverName}),e.jsx("div",{className:"text-xs text-slate-500",children:t.driverId})]}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 font-medium",children:[t.periodStart," - ",t.periodEnd]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"bg-slate-100 text-slate-700 px-2.5 py-0.5 rounded-full text-xs font-bold",children:t.jobsCount})}),e.jsxs("td",{className:"px-6 py-4 text-right text-slate-500",children:["£",t.grossAmount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right text-green-600 text-xs font-medium",children:["+£",t.extrasAmount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right text-red-500 text-xs font-medium",children:["-£",t.feesAmount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-right font-bold text-slate-900 text-base",children:["£",t.netAmount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-center",children:[t.status==="pending"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"}),t.status==="processing"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Processing"}),t.status==="paid"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Paid"})]}),e.jsx("td",{className:"px-6 py-4 text-right",children:o?e.jsx("div",{className:"flex justify-end gap-2",children:t.status==="pending"?e.jsx(x,{size:"sm",onClick:()=>f(t.driverId),className:"bg-slate-900 text-white hover:bg-slate-800 h-8 text-xs",children:"Review"}):e.jsx(x,{variant:"outline",size:"sm",onClick:()=>f(t.driverId),className:"h-8 text-xs",children:"View Details"})}):e.jsx("div",{className:"flex justify-end gap-2",children:i==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"outline",size:"sm",className:"h-8 text-xs",children:"Review"}),e.jsxs(x,{size:"sm",onClick:()=>y(t.id),className:"bg-green-600 hover:bg-green-700 text-white h-8 text-xs gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),"Generate Payout"]})]}):e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:"View Receipt"})})})]},t.id))})]})})})]})]})}export{$ as FinanceManager};
