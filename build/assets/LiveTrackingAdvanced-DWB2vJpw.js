import{j as e}from"./radix-vendor-BV-zUPZ_.js";import{a as r}from"./react-vendor-BK8AH302.js";import{m as h}from"./mapbox-gl-BnguMuRq.js";import{f as z}from"./configService-becgr1wi.js";import{M as V}from"./mapboxConfig-B9kHtw8J.js";import{bO as E,bM as X,bN as Q,bm as K,aO as P,at as H,bn as F,bq as D,aB as $,aD as _,ay as q,am as W,ak as Y,ah as Z,bF as ee,au as R,bP as te,av as T,b1 as se,b0 as ae,bQ as re}from"./ui-vendor-qxZeYYxY.js";import"./map-vendor-B8JKxxRh.js";import"./index-BcnowT96.js";const le={};var ne={};function ie({pickupLocation:o,deliveryLocation:m,driverLocation:c,driverHeading:N=0,showTraffic:b=!1,className:j="w-full h-full"}){const f=r.useRef(null),a=r.useRef(null),u=r.useRef(null),[k,p]=r.useState(null),[v,y]=r.useState(""),[S,M]=r.useState(null),B=async()=>{const d=typeof process<"u"&&ne?.NEXT_PUBLIC_MAPBOX_TOKEN||typeof import.meta<"u"&&le?.NEXT_PUBLIC_MAPBOX_TOKEN;if(d)return d;const t=typeof window<"u"?localStorage.getItem("mapbox_token"):null;if(t)return t;const x=await z();return x?.mapboxToken?(localStorage.setItem("mapbox_token",x.mapboxToken),x.mapboxToken):V},l=()=>{v.trim()&&(localStorage.setItem("mapbox_token",v.trim()),window.location.reload())};r.useEffect(()=>((async()=>{const t=await B();if(!t){p("Missing Mapbox Token");return}if(M(t),!a.current&&f.current){h.accessToken=t;try{a.current=new h.Map({container:f.current,style:"mapbox://styles/mapbox/light-v11",center:[c.lng,c.lat],zoom:13}),a.current.addControl(new h.NavigationControl,"top-right"),a.current.on("load",()=>{if(!a.current)return;b&&a.current.addLayer({id:"traffic",source:{type:"vector",url:"mapbox://mapbox.mapbox-traffic-v1"},"source-layer":"traffic",type:"line",paint:{"line-width":2,"line-color":["case",["==","low",["get","congestion"]],"#aab7ef",["==","moderate",["get","congestion"]],"#4264fb",["==","heavy",["get","congestion"]],"#ee4e8b",["==","severe",["get","congestion"]],"#b43b71","#000000"]}});const x=document.createElement("div");x.className="w-8 h-8 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white font-bold",x.innerText="P",new h.Marker(x).setLngLat([o.lng,o.lat]).setPopup(new h.Popup({offset:25}).setHTML(`<b>Pickup</b><br>${o.address||""}`)).addTo(a.current);const g=document.createElement("div");g.className="w-8 h-8 bg-green-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white font-bold",g.innerText="D",new h.Marker(g).setLngLat([m.lng,m.lat]).setPopup(new h.Popup({offset:25}).setHTML(`<b>Delivery</b><br>${m.address||""}`)).addTo(a.current);const w=document.createElement("div");w.className="driver-marker",w.innerHTML=`
            <div style="transform: rotate(${N}deg); transition: transform 0.3s ease;">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-600 fill-purple-100 drop-shadow-lg">
                <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" />
                <circle cx="7" cy="17" r="2" />
                <path d="M9 17h6" />
                <circle cx="17" cy="17" r="2" />
                </svg>
            </div>
            `,u.current=new h.Marker(w).setLngLat([c.lng,c.lat]).addTo(a.current),L(t);const s=new h.LngLatBounds;s.extend([o.lng,o.lat]),s.extend([m.lng,m.lat]),s.extend([c.lng,c.lat]),a.current.fitBounds(s,{padding:50})})}catch(x){console.error("Mapbox Error:",x),p("Failed to load map")}}})(),()=>{a.current?.remove(),a.current=null}),[]),r.useEffect(()=>{if(!a.current||!u.current)return;u.current.setLngLat([c.lng,c.lat]);const t=u.current.getElement().querySelector("div");t&&(t.style.transform=`rotate(${N}deg)`)},[c,N]),r.useEffect(()=>{!a.current||!a.current.isStyleLoaded()||(b?a.current.getLayer("traffic")||a.current.addLayer({id:"traffic",source:{type:"vector",url:"mapbox://mapbox.mapbox-traffic-v1"},"source-layer":"traffic",type:"line",paint:{"line-width":2,"line-color":["case",["==","low",["get","congestion"]],"#aab7ef",["==","moderate",["get","congestion"]],"#4264fb",["==","heavy",["get","congestion"]],"#ee4e8b",["==","severe",["get","congestion"]],"#b43b71","#000000"]}}):a.current.getLayer("traffic")&&(a.current.removeLayer("traffic"),a.current.getSource("traffic")&&a.current.removeSource("traffic")))},[b]);const L=async d=>{if(!a.current||(!d&&S&&(d=S),!d))return;const x=`https://api.mapbox.com/directions/v5/mapbox/driving/${`${o.lng},${o.lat};${m.lng},${m.lat}`}?geometries=geojson&access_token=${d}`;try{const s=(await(await fetch(x)).json()).routes?.[0]?.geometry;s&&(a.current.getSource("route")?a.current.getSource("route").setData({type:"Feature",properties:{},geometry:s}):a.current.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:s}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b82f6","line-width":4,"line-opacity":.75}}))}catch(g){console.error("Error fetching route:",g)}};return k?e.jsxs("div",{className:`bg-slate-100 flex flex-col items-center justify-center rounded-xl border border-gray-300 ${j} p-4`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"font-bold text-gray-500",children:"Map Unavailable"}),e.jsx("p",{className:"text-xs text-gray-400",children:k})]}),e.jsxs("div",{className:"w-full max-w-xs bg-white p-3 rounded shadow-sm border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Enter Mapbox Public Token:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:v,onChange:d=>y(d.target.value),placeholder:"pk.eyJ1...",className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-xs w-full"}),e.jsx("button",{onClick:l,className:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs font-bold hover:bg-blue-700 whitespace-nowrap",children:"Save"})]}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2 text-center",children:"You can also set this in System Configuration."})]})]}):e.jsx("div",{ref:f,className:j})}function ge(){const[o,m]=r.useState(null),[c,N]=r.useState(!0),[b,j]=r.useState("grid"),[f,a]=r.useState(!0),[u,k]=r.useState("all"),[p,v]=r.useState(""),[y,S]=r.useState(!0),[M,B]=r.useState(!0),[l,L]=r.useState([{id:"1",bookingNumber:"SMH-1002",driver:{name:"Mike Johnson",phone:"+44 7700 900111",vehicle:"Large Van - AB12 CDE",rating:4.8},customer:{name:"Emma Wilson",phone:"+44 7700 900456",email:"emma@example.com"},pickup:{address:"123 High Street, Birmingham",postcode:"B1 1AA",lat:52.4862,lng:-1.8904},delivery:{address:"456 Park Lane, Leeds",postcode:"LS1 1AA",lat:53.7997,lng:-1.5492},status:"in-transit",currentLocation:{lat:53.1424,lng:-1.6724},driverHeading:45,driverSpeed:55,eta:"14:30",distance:120,completedDistance:65,startTime:new Date(Date.now()-72e5),estimatedArrival:new Date(Date.now()+36e5),lastUpdate:new Date,priority:"urgent",value:450},{id:"2",bookingNumber:"SMH-1003",driver:{name:"Sarah Davis",phone:"+44 7700 900222",vehicle:"Medium Van - FG34 HIJ",rating:4.9},customer:{name:"David Brown",phone:"+44 7700 900789",email:"david@example.com"},pickup:{address:"10 Westminster Road, London",postcode:"SW1A 1AA",lat:51.5014,lng:-.1419},delivery:{address:"25 Oxford Street, Oxford",postcode:"OX1 1AA",lat:51.752,lng:-1.2577},status:"picked-up",currentLocation:{lat:51.5014,lng:-.1419},driverHeading:270,driverSpeed:15,eta:"11:45",distance:60,completedDistance:5,startTime:new Date(Date.now()-18e5),estimatedArrival:new Date(Date.now()+54e5),lastUpdate:new Date,priority:"normal",value:320},{id:"3",bookingNumber:"SMH-1005",driver:{name:"Tom Wilson",phone:"+44 7700 900333",vehicle:"Luton Van - KL56 MNO",rating:5},customer:{name:"Lisa Anderson",phone:"+44 7700 900321",email:"lisa@example.com"},pickup:{address:"88 City Center, Bristol",postcode:"BS1 1AA",lat:51.4545,lng:-2.5879},delivery:{address:"99 Queen Street, Cardiff",postcode:"CF10 1AA",lat:51.4816,lng:-3.1791},status:"near-delivery",currentLocation:{lat:51.478,lng:-3.15},driverHeading:180,driverSpeed:25,eta:"10:15",distance:45,completedDistance:42,startTime:new Date(Date.now()-54e5),estimatedArrival:new Date(Date.now()+9e5),lastUpdate:new Date,priority:"urgent",value:380}]),d={"picked-up":{label:"Picked Up",color:"bg-blue-100 text-blue-700 border-blue-300",icon:"üì¶",gradient:"from-blue-500 to-cyan-500"},"in-transit":{label:"In Transit",color:"bg-purple-100 text-purple-700 border-purple-300",icon:"üöö",gradient:"from-purple-500 to-pink-500"},"near-delivery":{label:"Near Delivery",color:"bg-orange-100 text-orange-700 border-orange-300",icon:"üìç",gradient:"from-orange-500 to-red-500"},delivered:{label:"Delivered",color:"bg-green-100 text-green-700 border-green-300",icon:"‚úÖ",gradient:"from-green-500 to-emerald-500"}},t=o?l.find(s=>s.id===o):l[0];r.useEffect(()=>{if(!c)return;const s=setInterval(()=>{L(n=>n.map(i=>{if(i.status==="delivered")return i;const I=i.completedDistance/i.distance,C=Math.min(i.completedDistance+.5,i.distance),U=i.delivery.lat-i.pickup.lat,O=i.delivery.lng-i.pickup.lng,G=i.pickup.lat+U*(C/i.distance),J=i.pickup.lng+O*(C/i.distance);let A=i.status;return I>.9?A="near-delivery":I>.1&&(A="in-transit"),{...i,completedDistance:C,currentLocation:{lat:G,lng:J},driverSpeed:40+Math.random()*20,driverHeading:Math.atan2(O,U)*(180/Math.PI),status:A,lastUpdate:new Date}}))},3e3);return()=>clearInterval(s)},[c]),r.useEffect(()=>{M&&!o&&l.length>0&&m(l[0].id)},[l,o,M]);const x=l.filter(s=>{const n=u==="all"||s.status===u,i=p===""||s.bookingNumber.toLowerCase().includes(p.toLowerCase())||s.driver.name.toLowerCase().includes(p.toLowerCase())||s.customer.name.toLowerCase().includes(p.toLowerCase());return n&&i}),g=s=>{const n=Math.floor((Date.now()-s.getTime())/6e4);return n<60?`${n}m`:`${Math.floor(n/60)}h ${n%60}m`},w=s=>{const n=Math.floor((s.getTime()-Date.now())/6e4);return n<0?"Delayed":n<60?`${n}m`:`${Math.floor(n/60)}h ${n%60}m`};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Live Tracking Dashboard"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Real-time GPS monitoring with Google Maps integration"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>N(!c),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm ${c?"bg-white/20 hover:bg-white/30 border-2 border-white/40":"bg-white/10 hover:bg-white/20 border-2 border-white/20"}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Live ON"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Live OFF"})]})}),e.jsxs("button",{onClick:()=>S(!y),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm ${y?"bg-white/20 hover:bg-white/30 border-2 border-white/40":"bg-white/10 hover:bg-white/20 border-2 border-white/20"}`,children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Traffic"})]}),e.jsxs("button",{onClick:()=>a(!f),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 border-2 border-white/40 transition-all backdrop-blur-sm",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold text-sm",children:f?"Live Map":"Simple View"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(H,{className:"w-8 h-8 opacity-80"}),e.jsx(F,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:l.length}),e.jsx("div",{className:"text-sm text-blue-100",children:"Active Jobs"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(D,{className:"w-8 h-8 opacity-80"}),e.jsx(E,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:l.filter(s=>s.status==="in-transit").length}),e.jsx("div",{className:"text-sm text-purple-100",children:"In Transit"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(P,{className:"w-8 h-8 opacity-80"}),e.jsx($,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:l.filter(s=>s.status==="near-delivery").length}),e.jsx("div",{className:"text-sm text-orange-100",children:"Near Delivery"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(_,{className:"w-8 h-8 opacity-80"}),e.jsx(q,{className:"w-5 h-5"})]}),e.jsxs("div",{className:"text-3xl font-bold mb-1",children:[Math.round(l.reduce((s,n)=>s+n.completedDistance/n.distance*100,0)/l.length),"%"]}),e.jsx("div",{className:"text-sm text-green-100",children:"Avg Progress"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(W,{className:"w-8 h-8 opacity-80"}),e.jsx(F,{className:"w-5 h-5"})]}),e.jsxs("div",{className:"text-3xl font-bold mb-1",children:["¬£",l.reduce((s,n)=>s+n.value,0)]}),e.jsx("div",{className:"text-sm text-indigo-100",children:"Total Value"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-2 border-slate-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",value:p,onChange:s=>v(s.target.value),placeholder:"Search by booking, driver, or customer...",className:"w-full pl-10 pr-4 py-2 border-2 border-slate-300 rounded-lg text-sm focus:border-purple-500 focus:outline-none"}),p&&e.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Z,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})})]}),e.jsxs("select",{value:u,onChange:s=>k(s.target.value),className:"px-4 py-2 border-2 border-slate-300 rounded-lg text-sm font-semibold focus:border-purple-500 focus:outline-none",children:[e.jsxs("option",{value:"all",children:["All Status (",l.length,")"]}),e.jsxs("option",{value:"picked-up",children:["Picked Up (",l.filter(s=>s.status==="picked-up").length,")"]}),e.jsxs("option",{value:"in-transit",children:["In Transit (",l.filter(s=>s.status==="in-transit").length,")"]}),e.jsxs("option",{value:"near-delivery",children:["Near Delivery (",l.filter(s=>s.status==="near-delivery").length,")"]})]}),e.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>j("grid"),className:`px-3 py-1.5 rounded-lg text-sm font-semibold transition-all ${b==="grid"?"bg-white shadow text-purple-600":"text-slate-600"}`,children:"Grid"}),e.jsx("button",{onClick:()=>j("list"),className:`px-3 py-1.5 rounded-lg text-sm font-semibold transition-all ${b==="list"?"bg-white shadow text-purple-600":"text-slate-600"}`,children:"List"})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["Active Deliveries (",x.length,")"]}),e.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg transition-all",children:e.jsx(ee,{className:"w-4 h-4 text-slate-600"})})]}),e.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto pr-2",children:x.map(s=>e.jsxs("button",{onClick:()=>m(s.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${o===s.id||!o&&s.id===l[0].id?"border-purple-500 bg-purple-50 shadow-lg scale-105":"border-slate-200 bg-white hover:border-purple-300 hover:shadow"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"font-bold text-slate-900",children:s.bookingNumber}),s.priority==="urgent"&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700",children:"URGENT"})]}),e.jsx("div",{className:"text-sm text-slate-600",children:s.driver.name})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d[s.status].color} border-2`,children:[d[s.status].icon," ",d[s.status].label]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(R,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"truncate",children:s.customer.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(P,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"truncate",children:s.delivery.postcode})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(_,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{children:["ETA: ",s.eta]})]}),e.jsxs("div",{className:"font-semibold text-purple-600",children:["¬£",s.value]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mb-1",children:[e.jsxs("span",{children:[s.completedDistance.toFixed(1),"mi"]}),e.jsxs("span",{children:[(s.completedDistance/s.distance*100).toFixed(0),"%"]}),e.jsxs("span",{children:[s.distance,"mi"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${d[s.status].gradient} transition-all duration-500`,style:{width:`${s.completedDistance/s.distance*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-200 text-xs",children:[e.jsxs("span",{className:"text-slate-600",children:["‚è±Ô∏è ",g(s.startTime)," elapsed"]}),e.jsxs("span",{className:"text-slate-600",children:["üéØ ",w(s.estimatedArrival)," remaining"]})]})]},s.id))})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 border-b border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${t?d[t.status].gradient:"from-slate-400 to-slate-500"} flex items-center justify-center text-white`,children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:"Live GPS Tracking"}),e.jsx("p",{className:"text-sm text-slate-600",children:t?.bookingNumber||"Select a job"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsxs("div",{className:"flex items-center gap-2 bg-green-100 px-3 py-1.5 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm text-green-700 font-semibold",children:"Live Updates"})]}),e.jsx("button",{className:"p-2 hover:bg-white/50 rounded-lg transition-all",children:e.jsx(te,{className:"w-4 h-4 text-slate-600"})})]})]}),e.jsx("div",{className:"h-[500px]",children:t&&f?e.jsx(ie,{pickupLocation:{lat:t.pickup.lat,lng:t.pickup.lng,address:t.pickup.address,postcode:t.pickup.postcode},deliveryLocation:{lat:t.delivery.lat,lng:t.delivery.lng,address:t.delivery.address,postcode:t.delivery.postcode},driverLocation:{lat:t.currentLocation.lat,lng:t.currentLocation.lng},driverHeading:t.driverHeading,driverSpeed:t.driverSpeed,showTraffic:y}):e.jsxs("div",{className:"relative w-full h-full bg-gradient-to-br from-blue-50 via-cyan-50 to-green-50",children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 800 500",children:[e.jsxs("defs",{children:[e.jsx("pattern",{id:"liveGrid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#cbd5e1",strokeWidth:"0.5",opacity:"0.3"})}),e.jsxs("linearGradient",{id:"routeLive",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#10b981",stopOpacity:1}})]})]}),e.jsx("rect",{width:"800",height:"500",fill:"url(#liveGrid)"}),e.jsx("path",{d:"M 100 400 Q 300 200, 700 100",stroke:"url(#routeLive)",strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeDasharray:"15,10",className:"animate-pulse"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"100",cy:"400",r:"25",fill:"#3b82f6",stroke:"white",strokeWidth:"4",className:"drop-shadow-2xl"}),e.jsx("text",{x:"100",y:"408",fontSize:"18",fill:"white",textAnchor:"middle",fontWeight:"bold",children:"A"}),e.jsx("text",{x:"100",y:"435",fontSize:"14",fill:"#475569",textAnchor:"middle",fontWeight:"600",children:t?.pickup.postcode||"Pickup"})]}),e.jsxs("g",{children:[e.jsx("circle",{cx:"700",cy:"100",r:"25",fill:"#10b981",stroke:"white",strokeWidth:"4",className:"drop-shadow-2xl"}),e.jsx("text",{x:"700",y:"108",fontSize:"18",fill:"white",textAnchor:"middle",fontWeight:"bold",children:"B"}),e.jsx("text",{x:"700",y:"135",fontSize:"14",fill:"#475569",textAnchor:"middle",fontWeight:"600",children:t?.delivery.postcode||"Delivery"})]}),t&&e.jsxs("g",{className:"animate-pulse",children:[e.jsx("circle",{cx:100+t.completedDistance/t.distance*600,cy:400-t.completedDistance/t.distance*300,r:"30",fill:"#8b5cf6",stroke:"white",strokeWidth:"4",className:"drop-shadow-2xl"}),e.jsx("text",{x:100+t.completedDistance/t.distance*600,y:408-t.completedDistance/t.distance*300,fontSize:"24",textAnchor:"middle",children:"üöö"}),e.jsx("circle",{cx:100+t.completedDistance/t.distance*600,cy:400-t.completedDistance/t.distance*300,r:"50",fill:"none",stroke:"#8b5cf6",strokeWidth:"3",opacity:"0.3",className:"animate-ping"})]})]}),t&&e.jsx("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-md rounded-xl shadow-2xl p-4 border-2 border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-purple-600"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[t.completedDistance.toFixed(1),"mi / ",t.distance,"mi"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900",children:["ETA: ",t.eta]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[Math.round(t.driverSpeed)," mph"]})]})]})}),t&&e.jsx("div",{className:"absolute top-4 right-4 bg-purple-600/95 backdrop-blur-md rounded-xl shadow-xl px-4 py-2 border-2 border-purple-400",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-white"}),e.jsxs("span",{className:"text-xs font-bold text-white",children:["Updated ",Math.floor((Date.now()-t.lastUpdate.getTime())/1e3),"s ago"]})]})})]})})]}),t&&e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600"}),"Driver Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-white font-bold text-lg",children:t.driver.name.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:t.driver.name}),e.jsx("div",{className:"text-sm text-slate-600",children:t.driver.vehicle})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Rating"}),e.jsxs("div",{className:"font-bold text-yellow-600",children:["‚≠ê ",t.driver.rating]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(T,{className:"w-4 h-4 text-blue-600"}),t.driver.phone]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx($,{className:"w-4 h-4 text-green-600"}),"Speed: ",Math.round(t.driverSpeed)," mph"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(D,{className:"w-4 h-4 text-purple-600"}),"Heading: ",Math.round(t.driverHeading),"¬∞"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 text-sm font-semibold",children:[e.jsx(T,{className:"w-4 h-4"}),"Call"]}),e.jsxs("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 text-sm font-semibold",children:[e.jsx(se,{className:"w-4 h-4"}),"Message"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-blue-600"}),"Customer Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg",children:t.customer.name.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:t.customer.name}),e.jsx("div",{className:"text-sm text-slate-600",children:t.bookingNumber})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(T,{className:"w-4 h-4 text-blue-600"}),t.customer.phone]}),t.customer.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(ae,{className:"w-4 h-4 text-purple-600"}),t.customer.email]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(W,{className:"w-4 h-4 text-green-600"}),"Value: ¬£",t.value]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 text-sm font-semibold",children:[e.jsx(T,{className:"w-4 h-4"}),"Call"]}),e.jsxs("button",{className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 text-sm font-semibold",children:[e.jsx(re,{className:"w-4 h-4"}),"Share"]})]})]})]})]})]})]})]})}export{ge as LiveTrackingAdvanced};
