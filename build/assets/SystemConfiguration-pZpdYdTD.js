import{j as e}from"./radix-vendor-BV-zUPZ_.js";import{a as t}from"./react-vendor-BK8AH302.js";import{m as Y}from"./mapbox-gl-BnguMuRq.js";import{an as q,ax as M,bJ as P,aN as D,b3 as h,b4 as p,bY as H,bk as E,aA as Q,bl as X,bG as Z,ck as z,ap as U,b0 as V,aj as W,as as ee,bR as se,b2 as te}from"./ui-vendor-DgaPPGCl.js";import"./map-vendor-B8JKxxRh.js";function oe(){const[a,j]=t.useState(""),[r,v]=t.useState(""),[n,N]=t.useState(""),[i,w]=t.useState(""),[o,K]=t.useState(!1),[b,G]=t.useState(!1),[g,F]=t.useState(!1),[u,L]=t.useState(!1),[y,S]=t.useState(!1),[d,c]=t.useState(null),[O,x]=t.useState(""),[k,C]=t.useState(!1),[T,f]=t.useState(!1),[A,_]=t.useState("");t.useEffect(()=>{$()},[]);const $=async()=>{try{const s=localStorage.getItem("mapbox_token"),l=localStorage.getItem("admin_stripe_api_key"),m=localStorage.getItem("admin_twilio_api_key"),I=localStorage.getItem("admin_sendgrid_api_key");s&&j(s),l&&v(l),m&&N(m),I&&w(I)}catch(s){console.error("Error loading configuration:",s)}},R=async()=>{C(!0),f(!1),_("");try{a&&(localStorage.setItem("mapbox_token",a),Y.accessToken=a),r&&localStorage.setItem("admin_stripe_api_key",r),n&&localStorage.setItem("admin_twilio_api_key",n),i&&localStorage.setItem("admin_sendgrid_api_key",i),await new Promise(s=>setTimeout(s,1e3)),f(!0),setTimeout(()=>f(!1),3e3)}catch(s){_("Failed to save configuration. Please try again."),console.error("Error saving configuration:",s)}finally{C(!1)}},B=async()=>{if(!a){c("error"),x("Please enter a Mapbox token first");return}S(!0),c(null),x("");try{const s=`https://api.mapbox.com/geocoding/v5/mapbox.places/London.json?access_token=${a}`,l=await fetch(s);if(l.ok)c("success"),x("âœ… Mapbox Token is valid and working!");else{const m=await l.json();throw new Error(m.message||"Invalid Token")}}catch(s){c("error"),x(`âŒ ${s.message||"Invalid Token"}. Please check your Mapbox account.`)}finally{S(!1)}},J=s=>{navigator.clipboard.writeText(s),alert("Key copied to clipboard!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"System Configuration"}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Manage API keys and integrations"})]})]})}),T&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-green-900",children:"Configuration Saved Successfully!"}),e.jsx("div",{className:"text-sm text-green-700",children:"Your changes have been applied."})]})]}),A&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-red-900",children:"Error Saving Configuration"}),e.jsx("div",{className:"text-sm text-red-700",children:A})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(D,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Mapbox API"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Required for live tracking and route planning"})]})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-700",children:"Configured"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Public Access Token",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",value:a,onChange:s=>j(s.target.value),placeholder:"pk.eyJ1...",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:border-blue-500 focus:outline-none pr-24 font-mono text-sm"}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex gap-2",children:[e.jsx("button",{onClick:()=>K(!o),className:"p-2 hover:bg-slate-100 rounded-lg transition-all",title:o?"Hide":"Show",children:o?e.jsx(h,{className:"w-4 h-4 text-slate-600"}):e.jsx(p,{className:"w-4 h-4 text-slate-600"})}),a&&e.jsx("button",{onClick:()=>J(a),className:"p-2 hover:bg-slate-100 rounded-lg transition-all",title:"Copy",children:e.jsx(H,{className:"w-4 h-4 text-slate-600"})})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:B,disabled:y||!a,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white rounded-lg font-semibold transition-all",children:y?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 animate-spin"}),"Testing Token..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Test Connection"]})}),e.jsxs("a",{href:"https://account.mapbox.com/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 bg-slate-600 hover:bg-slate-700 text-white rounded-lg font-semibold transition-all",children:[e.jsx(X,{className:"w-4 h-4"}),"Get Access Token"]})]}),d&&e.jsx("div",{className:`p-4 rounded-xl border-2 ${d==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[d==="success"?e.jsx(M,{className:"w-5 h-5 text-green-600"}):e.jsx(P,{className:"w-5 h-5 text-red-600"}),e.jsx("div",{className:`text-sm font-semibold ${d==="success"?"text-green-900":"text-red-900"}`,children:O})]})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("div",{className:"font-bold mb-2",children:"Quick Setup Guide:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-blue-800",children:[e.jsxs("li",{children:["Go to ",e.jsx("a",{href:"https://account.mapbox.com/",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Mapbox Account"})]}),e.jsx("li",{children:"Sign up or Log in"}),e.jsx("li",{children:'Copy your "Default public token" (starts with pk.)'}),e.jsx("li",{children:'Paste it above and click "Test Connection"'}),e.jsx("li",{children:"Save configuration"})]}),e.jsxs("div",{className:"mt-3 p-2 bg-blue-100 rounded border border-blue-300",children:[e.jsx("div",{className:"font-bold text-xs mb-1",children:"ðŸ’° Pricing:"}),e.jsx("div",{className:"text-xs",children:"Generous free tier (up to 50,000 loads/mo)."})]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Stripe API"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Payment processing and invoicing"})]})]}),r&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-700",children:"Configured"})]})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Stripe Secret Key",e.jsx("span",{className:"text-slate-400 ml-1 text-xs",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",value:r,onChange:s=>v(s.target.value),placeholder:"sk_live_...",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:border-purple-500 focus:outline-none pr-12 font-mono text-sm"}),e.jsx("button",{onClick:()=>G(!b),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 hover:bg-slate-100 rounded-lg transition-all",children:b?e.jsx(h,{className:"w-4 h-4 text-slate-600"}):e.jsx(p,{className:"w-4 h-4 text-slate-600"})})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Twilio API"}),e.jsx("p",{className:"text-sm text-slate-600",children:"SMS notifications and alerts"})]})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-700",children:"Configured"})]})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Twilio Auth Token",e.jsx("span",{className:"text-slate-400 ml-1 text-xs",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",value:n,onChange:s=>N(s.target.value),placeholder:"Enter Twilio auth token",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:border-green-500 focus:outline-none pr-12 font-mono text-sm"}),e.jsx("button",{onClick:()=>F(!g),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 hover:bg-slate-100 rounded-lg transition-all",children:g?e.jsx(h,{className:"w-4 h-4 text-slate-600"}):e.jsx(p,{className:"w-4 h-4 text-slate-600"})})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 px-6 py-4 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"SendGrid API"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Email notifications and marketing"})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-green-700",children:"Configured"})]})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["SendGrid API Key",e.jsx("span",{className:"text-slate-400 ml-1 text-xs",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:i,onChange:s=>w(s.target.value),placeholder:"SG....",className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:border-orange-500 focus:outline-none pr-12 font-mono text-sm"}),e.jsx("button",{onClick:()=>L(!u),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 hover:bg-slate-100 rounded-lg transition-all",children:u?e.jsx(h,{className:"w-4 h-4 text-slate-600"}):e.jsx(p,{className:"w-4 h-4 text-slate-600"})})]})]})})]}),e.jsx("div",{className:"sticky bottom-4 bg-white rounded-xl shadow-2xl border-2 border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-slate-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900",children:"Save Configuration"}),e.jsx("div",{className:"text-sm text-slate-600",children:"All API keys are encrypted and stored securely"})]})]}),e.jsx("button",{onClick:R,disabled:k,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:from-slate-400 disabled:to-slate-500 text-white rounded-xl font-bold shadow-lg transition-all",children:k?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):T?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-5 h-5"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-5 h-5"}),"Save All Changes"]})})]})}),e.jsx("div",{className:"bg-slate-50 border-2 border-slate-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-slate-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-slate-700",children:[e.jsx("div",{className:"font-bold mb-1",children:"ðŸ”’ Security Notice"}),e.jsx("div",{className:"text-slate-600",children:"All API keys are encrypted before storage. Never share your admin credentials or API keys with anyone. Always use environment-specific keys (test keys for development, production keys for live environment)."})]})]})})]})}export{oe as SystemConfiguration};
