import{r as n,j as e}from"./index-5UJQZh1O.js";import{C as p}from"./clock-BSTGw2vZ.js";import{C as o,F as j,U as b}from"./badge-CFUPwwPp.js";import{C as c}from"./circle-x-DbKW_n_M.js";import{M as g}from"./map-pin-CAk8qj7B.js";import{C as N}from"./camera-BtK8SFEK.js";const f=[{id:"VAR-001",jobId:"JOB-1234",driverName:"John Driver",reasonId:"extra_floor",reasonLabel:"Extra Floors (No Lift)",value:2,unit:"floors",cost:20,notes:"Lift is broken, had to carry sofa up 2 floors.",status:"pending",timestamp:"2024-05-20T10:30:00Z",hasPhoto:!0},{id:"VAR-002",jobId:"JOB-5678",driverName:"Sarah Smith",reasonId:"waiting_time",reasonLabel:"Waiting Time",value:45,unit:"minutes",cost:45,notes:"Customer not home, waited 45 mins.",status:"pending",timestamp:"2024-05-20T11:15:00Z",hasPhoto:!0},{id:"VAR-003",jobId:"JOB-9012",driverName:"Mike Jones",reasonId:"extra_items",reasonLabel:"Extra Items",value:5,unit:"items",cost:75,notes:"5 extra boxes not declared.",status:"approved",timestamp:"2024-05-19T14:20:00Z",hasPhoto:!0}];function I(){const[t,x]=n.useState(f),[a,m]=n.useState("pending"),r=(s,l)=>{x(h=>h.map(i=>i.id===s?{...i,status:l}:i))},d=t.filter(s=>a==="all"||s.status===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Variation Requests"}),e.jsx("p",{className:"text-slate-500",children:"Manage on-site extra charges submitted by drivers"})]}),e.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:["pending","approved","rejected","all"].map(s=>e.jsx("button",{onClick:()=>m(s),className:`px-4 py-2 rounded-md text-sm font-medium capitalize transition-all ${a===s?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Pending Review"}),e.jsx(p,{className:"w-5 h-5 text-orange-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(s=>s.status==="pending").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Approved Today"}),e.jsx(o,{className:"w-5 h-5 text-green-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["£",t.filter(s=>s.status==="approved").reduce((s,l)=>s+l.cost,0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Rejected"}),e.jsx(c,{className:"w-5 h-5 text-red-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(s=>s.status==="rejected").length})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:d.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-500",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-8 h-8 text-slate-400"})}),e.jsx("p",{children:"No requests found in this category."})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:d.map(s=>e.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide ${s.status==="pending"?"bg-orange-100 text-orange-700":s.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status}),e.jsx("span",{className:"text-sm text-slate-400",children:new Date(s.timestamp).toLocaleString()})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:s.reasonLabel}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-4 h-4"}),s.driverName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-4 h-4"}),"Job #",s.jobId]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[e.jsxs("p",{className:"text-sm text-slate-700 italic",children:['"',s.notes,'"']}),s.hasPhoto&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-blue-600 font-medium cursor-pointer hover:underline",children:[e.jsx(N,{className:"w-4 h-4"}),"View Evidence Photo"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between min-w-[200px]",children:[e.jsxs("div",{className:"text-right mb-4",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Requested Amount"}),e.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:["£",s.cost.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[s.value," ",s.unit," @ Rate"]})]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{onClick:()=>r(s.id,"rejected"),className:"flex-1 px-4 py-2 border border-red-200 text-red-700 rounded-lg hover:bg-red-50 font-medium transition-colors",children:"Reject"}),e.jsx("button",{onClick:()=>r(s.id,"approved"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors shadow-sm",children:"Approve"})]}),s.status!=="pending"&&e.jsx("div",{className:"flex items-center gap-2 text-sm font-medium",children:s.status==="approved"?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(o,{className:"w-4 h-4"})," Approved"]}):e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"})," Rejected"]})})]})]})},s.id))})})]})}export{I as VariationRequests};
