import{j as e}from"./radix-vendor-BV-zUPZ_.js";import{a as h,d as p}from"./react-vendor-BK8AH302.js";import{j as r}from"./index-CcmsAmAk.js";import{ak as g,aM as u,aP as b,au as f,b0 as j}from"./ui-vendor-DgaPPGCl.js";const i=[{id:"l1",name:"Alice Walker",email:"alice@test.com",phone:"07123456789",price:450,date:"2024-02-15",generatedAt:"2 hours ago",status:"new",origin:"London",destination:"Manchester"},{id:"l2",name:"Bob Builder",email:"bob@test.com",phone:"07987654321",price:280,date:"2024-01-20",generatedAt:"5 hours ago",status:"new",origin:"Bristol",destination:"Bath"},{id:"l3",name:"Charlie Day",email:"charlie@test.com",phone:"07555555555",price:1200,date:"2024-03-01",generatedAt:"1 day ago",status:"contacted",notes:"Left voicemail",origin:"Leeds",destination:"London"},{id:"l4",name:"Diana Prince",email:"diana@test.com",phone:"07444444444",price:650,date:"2024-02-10",generatedAt:"2 days ago",status:"negotiating",notes:"Asked for 10% discount",origin:"Oxford",destination:"Cambridge"},{id:"l5",name:"Evan Peters",email:"evan@test.com",phone:"07333333333",price:320,date:"2024-01-25",generatedAt:"3 days ago",status:"lost",notes:"Too expensive",origin:"Liverpool",destination:"Manchester"}];function D(){const[l,o]=h.useState(i);p.useEffect(()=>{const a=()=>{const n=r.getCallbackRequests().map(s=>({id:s.id,name:s.name,email:s.email||"N/A",phone:s.phone,price:0,date:"TBD",generatedAt:new Date(s.date).toLocaleDateString(),status:s.status==="called"?"contacted":s.status==="converted"?"won":"new",notes:s.notes||"Website Callback Request",origin:"Unknown",destination:"Unknown"}));o([...n,...i])};return a(),r.on("leads_updated",a),()=>{r.off("leads_updated",a)}},[]);const d=()=>[{id:"new",label:"New Quotes",color:"border-blue-500 bg-blue-50"},{id:"contacted",label:"Contacted",color:"border-orange-500 bg-orange-50"},{id:"negotiating",label:"Negotiating",color:"border-purple-500 bg-purple-50"},{id:"won",label:"Won (Booked)",color:"border-green-500 bg-green-50"},{id:"lost",label:"Lost",color:"border-slate-500 bg-slate-50"}],c=(a,t)=>{a.dataTransfer.setData("leadId",t)},x=(a,t)=>{const n=a.dataTransfer.getData("leadId");o(l.map(s=>s.id===n?{...s,status:t}:s))},m=a=>{a.preventDefault()};return e.jsxs("div",{className:"space-y-6 h-[calc(100vh-100px)] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Sales Pipeline"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Track and convert abandoned quotes into bookings"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search leads...",className:"pl-9 pr-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("button",{className:"px-4 py-2 bg-slate-900 text-white rounded-xl font-medium hover:bg-slate-800 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Add Manual Lead"]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto min-h-0",children:e.jsx("div",{className:"flex gap-4 h-full min-w-max pb-4",children:d().map(a=>e.jsxs("div",{className:`w-80 flex-shrink-0 flex flex-col rounded-xl border-t-4 ${a.color.split(" ")[0]} bg-slate-50/50`,onDragOver:m,onDrop:t=>x(t,a.id),children:[e.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-slate-200/50",children:[e.jsx("h3",{className:"font-bold text-slate-700",children:a.label}),e.jsx("span",{className:"text-xs font-bold bg-white border border-slate-200 px-2 py-0.5 rounded-full text-slate-500",children:l.filter(t=>t.status===a.id).length})]}),e.jsx("div",{className:"flex-1 p-3 overflow-y-auto space-y-3",children:l.filter(t=>t.status===a.id).map(t=>e.jsxs("div",{draggable:!0,onDragStart:n=>c(n,t.id),className:"bg-white p-4 rounded-lg shadow-sm border border-slate-200 hover:shadow-md cursor-grab active:cursor-grabbing group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-slate-900",children:t.name}),e.jsxs("span",{className:"font-bold text-green-600 text-sm",children:["£",t.price]})]}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"}),"Move: ",t.date]}),e.jsxs("div",{className:"flex items-center gap-1 truncate",children:[e.jsx("span",{className:"font-medium text-slate-700",children:t.origin}),e.jsx("span",{children:"→"}),e.jsx("span",{className:"font-medium text-slate-700",children:t.destination})]})]}),t.notes&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 p-2 rounded text-xs text-yellow-800 mb-3 italic",children:['"',t.notes,'"']}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 pt-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-blue-600",title:"Call",children:e.jsx(f,{className:"w-3.5 h-3.5"})}),e.jsx("button",{className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-green-600",title:"Email",children:e.jsx(j,{className:"w-3.5 h-3.5"})})]}),e.jsx("span",{className:"text-[10px] text-slate-400",children:t.generatedAt})]})]},t.id))})]},a.id))})})]})}export{D as LeadManagement};
